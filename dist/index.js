typeof window<"u"&&(async()=>{try{let e=await import("datastar");e?.attribute&&e.attribute(y(e.beginBatch,e.endBatch))}catch{}})();function h(e){let n=e.toLowerCase().split("-").map(t=>t.trim()),r={},a="";for(let t of n)switch(t){case"ctrl":case"control":r.ctrl=!0;break;case"alt":r.alt=!0;break;case"shift":r.shift=!0;break;case"meta":case"cmd":case"command":r.meta=!0;break;default:a=t;break}return{key:a,modifiers:r}}function w(e){if(e.length===1&&/[a-z]/.test(e))return e;let n=e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();return{Space:" ",Return:"Enter",Esc:"Escape",Del:"Delete",Pageup:"PageUp",Pagedown:"PageDown",Up:"ArrowUp",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight"}[n]||n}function v(e,n){let{key:r,modifiers:a}=h(n),t=e.key,i=w(r);return!(t!==i||!!a.ctrl!==e.ctrlKey||!!a.alt!==e.altKey||!!a.shift!==e.shiftKey||!!a.meta!==e.metaKey)}function y(e,n){return{name:"on-keys",requirement:{value:"must"},argNames:["evt"],returnsValue:!0,apply({el:r,key:a,mods:t,rx:i}){let l=a?a.split(".").map(s=>s.trim()):[],o=window;t.has("el")&&(o=r);let u=s=>{e(),i(s),n()};u=E(u,t),u=H(u,t);let p=s=>{if(s){if(!(s instanceof KeyboardEvent))return;let f=!1;if(l.length===0)f=!0;else for(let b of l)if(v(s,b)){f=!0;break}if(!f)return;!t.has("noprevent")&&typeof a<"u"&&s.preventDefault(),t.has("stop")&&s.stopPropagation()}u(s)},g={capture:t.has("capture"),passive:t.has("passive"),once:t.has("once")},m=t.has("up")?"keyup":"keydown";return o.addEventListener(m,p,g),()=>{o.removeEventListener(m,p,g)}}}}var E=(e,n)=>{if(n.has("viewtransition")&&document.startViewTransition){let r=e;e=(...a)=>document.startViewTransition(()=>r(...a))}return e},C=(e,n)=>(...r)=>{setTimeout(()=>{e(...r)},n)},k=(e,n,r=!1,a=!0)=>{let t=0;return(...i)=>{t&&clearTimeout(t),r&&!t&&e(...i),t=setTimeout(()=>{a&&e(...i),t&&clearTimeout(t),t=0},n)}},T=(e,n,r=!0,a=!1)=>{let t=!1;return(...i)=>{t||(r&&e(...i),t=!0,setTimeout(()=>{a&&e(...i),t=!1},n))}},H=(e,n)=>{let r=n.get("delay");if(r){let i=d(r);e=C(e,i)}let a=n.get("debounce");if(a){let i=d(a),l=c(a,"leading",!1),o=!c(a,"notrailing",!1);e=k(e,i,l,o)}let t=n.get("throttle");if(t){let i=d(t),l=!c(t,"noleading",!1),o=c(t,"trailing",!1);e=T(e,i,l,o)}return e},d=e=>{if(!e||e.size<=0)return 0;for(let n of e){if(n.endsWith("ms"))return+n.replace("ms","");if(n.endsWith("s"))return+n.replace("s","")*1e3;try{return Number.parseFloat(n)}catch{}}return 0},c=(e,n,r=!1)=>e?e.has(n.toLowerCase()):r;export{y as default,H as modifyTiming,E as modifyViewTransition};
//# sourceMappingURL=index.js.map
